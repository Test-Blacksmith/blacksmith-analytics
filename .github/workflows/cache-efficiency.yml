name: Cache Efficiency Analysis

on:
  workflow_dispatch:
  push:
    branches: [ main ]

jobs:
  cold-start:
    name: "Cold Start (No Cache)"
    runs-on: ubuntu-latest
    steps:
      - name: Setup without cache
        uses: actions/setup-node@v4
        with:
          node-version: '20'
      
      - name: Measure cold install
        run: |
          START=$(date +%s)
          npm init -y
          npm install express axios lodash moment cheerio
          END=$(date +%s)
          DURATION=$((END - START))
          
          echo "## ❄️ Cold Start Performance" >> $GITHUB_STEP_SUMMARY
          echo "- Duration: ${DURATION}s" >> $GITHUB_STEP_SUMMARY
          echo "- Cache Status: MISS (no cache)" >> $GITHUB_STEP_SUMMARY
          echo "- Dependencies: 5 packages + transitive deps" >> $GITHUB_STEP_SUMMARY
          echo "- Total packages installed: $(ls node_modules | wc -l)" >> $GITHUB_STEP_SUMMARY

  warm-cache:
    name: "Warm Cache"
    runs-on: ubuntu-latest
    steps:
      - name: Create package files
        run: |
          npm init -y
          cat > package.json << 'JSON'
          {
